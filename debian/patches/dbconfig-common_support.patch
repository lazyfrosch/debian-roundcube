--- roundcube_0.1~beta2.2/config/db.inc.php.dist        2006-03-20 23:08:51.000000000 +0100
+++ roundcube_0.1~beta2.2/config/db.inc.php.dist  2007-03-13 14:33:38.000000000 +0100
@@ -14,13 +14,20 @@

 $rcmail_config = array();

-// PEAR database DSN for read/write operations
-// format is db_provider://user:password@host/databse
-// currently supported db_providers: mysql, sqlite
-
-$rcmail_config['db_dsnw'] = 'mysql://roundcube:pass@localhost/roundcubemail';
-// postgres example: 'pgsql://roundcube:pass@localhost/roundcubemail';
-// sqlite example: 'sqlite://./sqlite.db?mode=0646';
+/* Do not set db_dsnw here, use dpkg-reconfigure roundcube to configure database ! */
+
+include_once("/etc/roundcube/debian-db.php");
+
+switch ($dbtype) {
+ case "sqlite":
+   $rcmail_config['db_dsnw'] = "sqlite:///$basepath/$dbname?mode=0640";
+   break;
+ default:
+   if ($dbport != '') $dbport=":$dbport";
+   if ($dbserver == '') $dbserver="localhost";
+   $rcmail_config['db_dsnw'] = "$dbtype://$dbuser:$dbpass@$dbserver$dbport/$dbname";
+   break;
+ }

 // PEAR database DSN for read only operations (if empty write database will be used)
 // useful for database replication

